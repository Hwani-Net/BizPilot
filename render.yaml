services:
  # BizPilot Backend Server
  - type: web
    name: bizpilot-server
    env: node
    plan: free
    rootDir: server
    buildCommand: npm install && npm run build
    startCommand: node dist/index.js
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3001
      - key: OPENAI_API_KEY
        sync: false   # Render 대시보드에서 직접 입력
      - key: TWILIO_ACCOUNT_SID
        sync: false
      - key: TWILIO_AUTH_TOKEN
        sync: false
      - key: TWILIO_PHONE_NUMBER
        sync: false
      - key: AI_MODEL
        value: gpt-4o-realtime-preview-2024-12-17
      - key: AI_VOICE
        value: alloy
      - key: MOCK_MODE
        value: "true"
      - key: RCE_THRESHOLD_KM
        value: "1500"
